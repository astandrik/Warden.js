(function(){var a;a={},a.version="0.0.0",a.toString=function(){return a.stringify(a)},a.create=function(b,c){var d,e,f;return f={},d={},e={},e.max=c&&c.max||128,b.prototype.emit=function(a){var b;return b=this,null!=f[a.type]&&f[a.type].map(function(c){return c.evaluate(a,b)}),null!=d[a.type]&&d[a.type].map(function(c){var d,e;return e=c.config&&c.config.context||b,d=c.config&&c.config.adj,c.callback.apply(e,[a].concat(d))}),this},b.prototype.on=function(a,b,c){if("string"!=typeof a)throw"Type Error: Wrong argument[1] in .on method. Expected string.";if("function"!=typeof b)throw"Type Error: Wrong argument[2] in .on method. Expected function.";if(null==d[a]&&(d[a]=[]),d[a].length>=e.max)throw"The maximum number ("+e.max+") of handler for event ["+a+"] exceed.";return d[a].push({callback:b,config:c}),this},b.prototype.stream=function(b,c){var d;return d=a.stream(b,c),null==f[b]&&(f[b]=[]),f[b].push(d),d},b},a.stream=function(a,b){var c,d;return c=function(){function a(a){this.process=null!=a?a:[],this.taken=0}return a.prototype.exec=function(a,b){var c,d,e,f,g,h;for(e=this,c=a,c.timestamp=(new Date).getTime(),c.environment="Warden 0.0.0",h=this.process,f=0,g=h.length;g>f;f++)switch(d=h[f],d.type){case"m":c="function"==typeof d.fn?d.fn(c):d.fn,e.mapped=!0;break;case"f":if("function"==typeof d.fn){if(d.fn(c)===!1)return!1}else if(Boolean(d.fn)===!1)return!1}return this.limit&&this.taken<=this.limit?(this.final.apply(b,[c]),this.taken++):void 0},a}(),d={type:a,name:b,config:[],activeBus:[]},c.prototype.map=function(a){return new c(this.process.concat({type:"m",fn:a}))},c.prototype.filter=function(a){return new c(this.process.concat({type:"f",fn:a}))},c.prototype.take=function(a,b){return"function"==typeof a?this.filter(a):null!=b?console.log("slice"):this.limit=a},c.prototype.listen=function(a){return this.final=a,d.activeBus.push(this),this},c.prototype.evaluate=function(a,b){return d.activeBus.map(function(c){return c.exec(a,b)})},new c},a.stringify=function(b,c,d){var e,f,g,h,i;if(h="{"+(c?"\n":" "),d||(d=0),d>2)return h="[object]";for(g="",e=0;e++<=d&&c;)g+="	";for(f in b)i=b[f],h+=""+g+f+":",h+="object"==typeof i?a.stringify(i,c,d+1)+(c?",\n":", "):i?"string"==typeof i?c?"'"+i.toString()+"',\n":"'"+i.toString()+"', ":c?""+i.toString()+",\n":""+i.toString()+", ":"'undefined'"+(c?",\n":", ");return h=h.slice(0,-2),h+=d>0?" }":c?"\n}":" }"},this.Warden=a}).call(this);